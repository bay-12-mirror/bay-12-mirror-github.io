<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<link rel="stylesheet" type="text/css" href="/dwarves/mantisbt/css/default.css" />
	<script type="text/javascript" language="JavaScript"><!--
		if(document.layers) {document.write("<style>td{padding:0px;}<\/style>")}
	// --></script>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Cache-Control" content="no-cache" />
	<meta http-equiv="Pragma-directive" content="no-cache" />
	<meta http-equiv="Cache-Directive" content="no-cache" />
	<meta http-equiv="Expires" content="Tue, 21 Jun 2022 21:27:16 GMT" />
	<link rel="shortcut icon" href="/dwarves/mantisbt/images/favicon.ico" type="image/x-icon" />
	<link rel="search" type="application/opensearchdescription+xml" title="MantisBT: Text Search" href="http://bay12games.com/dwarves/mantisbt/browser_search_plugin.php?type=text" />	<link rel="search" type="application/opensearchdescription+xml" title="MantisBT: Issue Id" href="http://bay12games.com/dwarves/mantisbt/browser_search_plugin.php?type=id" />	<title>0009972: Manager conditions do not properly track quantity of dyes - Dwarf Fortress Bug Tracker</title>
<script type="text/javascript" src="/dwarves/mantisbt/javascript/min/common.js"></script>
<script language="javascript">var loading_lang = "Loading...";</script><script type="text/javascript" src="/dwarves/mantisbt/javascript/min/ajax.js"></script>
</head>
<body>
<div align="left"><a href="my_view_page.php"><img border="0" alt="Mantis Bug Tracker" src="/dwarves/mantisbt/images/mantis_logo.gif" /></a></div><table class="hide"><tr><td class="login-info-left">Anonymous | <a href="/dwarves/mantisbt/login_page.php?return=%2Fdwarves%2Fmantisbt%2Fview.php%3Fid%3D9972">Login</a> | <a href="/dwarves/mantisbt/signup_page.php">Signup for a new account</a></td><td class="login-info-middle"><span class="italic">2022-06-21 14:27 PDT</span></td><td class="login-info-right"><a href="http://bay12games.com/dwarves/mantisbt/issues_rss.php?"><img src="/dwarves/mantisbt/images/rss.png" alt="RSS" style="border-style: none; margin: 5px; vertical-align: middle;" /></a></td></tr></table><table class="width100" cellspacing="0"><tr><td class="menu"><a href="/dwarves/mantisbt/main_page.php">Main</a> | <a href="/dwarves/mantisbt/my_view_page.php">My View</a> | <a href="/dwarves/mantisbt/view_all_bug_page.php">View Issues</a> | <a href="/dwarves/mantisbt/changelog_page.php">Change Log</a> | <a href="/dwarves/mantisbt/roadmap_page.php">Roadmap</a></td><td class="menu right nowrap"><form method="post" action="/dwarves/mantisbt/jump_to_bug.php"><input type="text" name="bug_id" size="10" class="small" value="Issue #" onfocus="if (this.value == 'Issue #') this.value = ''" onblur="if (this.value == '') this.value = 'Issue #'" />&nbsp;<input type="submit" class="button-small" value="Jump" />&nbsp;</form></td></tr></table><br /><table class="width100" cellspacing="1"><tr><td class="form-title" colspan="3">View Issue Details&nbsp;<span class="small"><span class="bracket-link">[&nbsp;<a href="#bugnotes">Jump to Notes</a>&nbsp;]</span> </span></td><td class="center"><span class="small"><span class="bracket-link">[&nbsp;<a href="bug_view_page.php?bug_id=11842">&lt;&lt;</a>&nbsp;]</span> <span class="bracket-link">[&nbsp;<a href="bug_view_page.php?bug_id=11870">&gt;&gt;</a>&nbsp;]</span> </span></td><td class="right" colspan="2"><span class="small"><span class="bracket-link">[&nbsp;<a href="view.php?id=9972&amp;history=1#history">Issue History</a>&nbsp;]</span> </span><span class="small"><span class="bracket-link">[&nbsp;<a href="print_bug_page.php?bug_id=9972">Print</a>&nbsp;]</span> </span></td></tr><tr><td class="category" width="15%">ID</td><td class="category" width="20%">Project</td><td class="category" width="15%">Category</td><td class="category" width="15%">View Status</td><td class="category" width="15%">Date Submitted</td><td class="category" width="20%">Last Update</td></tr><tr class="row-1"><td>0009972</td><td>Dwarf Fortress</td><td>Dwarf Mode -- Interface, Manager</td><td>public</td><td>2016-08-20 02:00</td><td>2022-05-27 20:53</td></tr><tr class="spacer"><td colspan="6"></td></tr><tr class="row-2"><td class="category">Reporter</td><td>qeveren</td><td colspan="4">&nbsp;</td></tr><tr class="row-1"><td class="category">Assigned To</td><td></td><td colspan="4">&nbsp;</td></tr><tr class="row-2"><td class="category">Priority</td><td>normal</td><td class="category">Severity</td><td>minor</td><td class="category">Reproducibility</td><td>always</td></tr><tr class="row-1"><td class="category">Status</td><td bgcolor="#fcbdbd">new</td><td class="category">Resolution</td><td>open</td><td colspan="2">&nbsp;</td></tr><tr class="row-2"><td class="category">Platform</td><td>Windows</td><td class="category">OS</td><td>Windows x64</td><td class="category">OS Version</td><td>7</td></tr><tr class="row-1"><td class="category">Product Version</td><td>0.43.03</td><td colspan="4">&nbsp;</td></tr><tr class="row-2"><td class="category">Target Version</td><td></td><td class="category">Fixed in Version</td><td></td><td colspan="2">&nbsp;</td></tr><tr class="spacer"><td colspan="6"></td></tr><tr class="row-1"><td class="category">Summary</td><td colspan="5">0009972: Manager conditions do not properly track quantity of dyes</td></tr><tr class="row-2"><td class="category">Description</td><td colspan="5">Conditions in manager orders that track the quantity of dye powders available appear to use values that do not match the amounts shown in the Stocks screen.  The difference between these values also appears to vary if the game is reloaded to the same point.</td></tr><tr class="row-1"><td class="category">Steps To Reproduce</td><td colspan="5">1. Create a Mill Plants (5) order to produce (eg.) dimple dye.<br />
2. Add a condition to the order &quot;Amount of dimple dye items* available is at most X&quot;, where X is any reasonable amount.<br />
3. Allow the job to run until the above condition is no longer met.  The quantity of dimple dye in stock will be significantly different from the amount specified in the condition.<br />
<br />
<br />
</td></tr><tr class="row-2"><td class="category">Additional Information</td><td colspan="5">* the item settings for dye are unintuitive; item type 'powder' with the appropriate dye material type does not track dyes at all.</td></tr><tr class="row-1"><td class="category">Tags</td><td colspan="5"><a href='tag_view_page.php?tag_id=1425' title=''>0.47.04</a>, <a href='tag_view_page.php?tag_id=143' title=''>Fortress Mode</a>, <a href='tag_view_page.php?tag_id=109' title=''>manager</a>, <a href='tag_view_page.php?tag_id=63' title=''>manager screen</a></td></tr><tr class="spacer"><td colspan="6"></td></tr><tr class="row-2"><td class="category"><a name="attachments" id="attachments" />Attached Files</td><td colspan="5"></td></tr><tr align="center"><td align="center" colspan="6"><table><tr class="vcenter"><td class="center"></td><td class="center"></td><td class="center"></td><td class="center"></td><td class="center"></td><td class="center"></td></tr></table></td></tr></table><br/>

<div id="relationships_open"><table class="width100" cellspacing="1">
<tr class="row-2" valign="top">
	<td width="15%" class="form-title" colspan="2">
		<a href="" onclick="ToggleDiv( 'relationships' ); return false;"
			><img border="0" src="images/minus.png" alt="-" /></a>&nbsp;Relationships	</td>
</tr>
<tr>
	<td colspan="2"></td>
</tr>
</table>

</div><div id="relationships_closed" class="hidden"><table class="width100" cellspacing="1">
<tr>
	<td class="form-title">
		<a href="" onclick="ToggleDiv( 'relationships' ); return false;"
			><img border="0" src="images/plus.png" alt="+" /></a>&nbsp;Relationships	</td>
</tr>
</table>

</div>
<a name="bugnotes" id="bugnotes" /><br />

<div id="bugnotes_open"><table class="width100" cellspacing="1">
<tr>
	<td class="form-title" colspan="2">
<a href="" onclick="ToggleDiv( 'bugnotes' ); return false;"
			><img border="0" src="images/minus.png" alt="-" /></a>&nbsp;		Notes	</td>
</tr>
<tr class="bugnote" id="c35796">
        <td class="bugnote-public">
				<span class="small">(<a href="view.php?id=9972#c35796" title="Direct link to note">0035796)</a></span><br />
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=36">Quietust</a>		<span class="small">(reporter)</span>
				<br />
		<span class="small">2016-08-20 05:34</span><br />
				<br /><div class="small">
				</div>
	</td>
	<td class="bugnote-note-public">
		Is the quantity stored greater or less than what's specified in the condition? If greater, by how much (e.g. by a factor of 2-3)?<br />
<br />
These are very important to know, because if the jobs produced 2-3 times as much dye as they were supposed to, it could be because it counted dye items without considering the <b>stack size</b> (which could vary between attempts if your dwarves decided to mill differently sized stacks of dimple cups).	</td>
</tr>
<tr class="spacer">
	<td colspan="2"></td>
</tr>
<tr class="bugnote" id="c35798">
        <td class="bugnote-public">
				<span class="small">(<a href="view.php?id=9972#c35798" title="Direct link to note">0035798)</a></span><br />
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11957">qeveren</a>		<span class="small">(reporter)</span>
				<br />
		<span class="small">2016-08-20 14:54</span><br />
		<span class="small">edited on:&#32;2016-08-21 17:25</span><br />		<br /><div class="small">
				</div>
	</td>
	<td class="bugnote-note-public">
		The amount of dye in Stocks (accounting for stacks) is less than the values the manager conditions seems to track, by a factor of ~ 7, though it seems to vary.  Dimple dye is behaving very oddly in conditions: having none in stock, the manager behaves if I have 223.<br />
<br />
	</td>
</tr>
<tr class="spacer">
	<td colspan="2"></td>
</tr>
<tr class="bugnote" id="c40431">
        <td class="bugnote-public">
				<span class="small">(<a href="view.php?id=9972#c40431" title="Direct link to note">0040431)</a></span><br />
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11637">Sarmatian123</a>		<span class="small">(reporter)</span>
				<br />
		<span class="small">2020-03-31 09:05</span><br />
				<br /><div class="small">
				</div>
	</td>
	<td class="bugnote-note-public">
		Manager fails to track available dyes. Still persisting in DF version 0.47.04.<br />
<br />
Dimple dye:<br />
item type: powder<br />
trait: unrotten items<br />
trait: dye items	</td>
</tr>
<tr class="spacer">
	<td colspan="2"></td>
</tr>
<tr class="bugnote" id="c40723">
        <td class="bugnote-public">
				<span class="small">(<a href="view.php?id=9972#c40723" title="Direct link to note">0040723)</a></span><br />
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=14889">Shirasik</a>		<span class="small">(reporter)</span>
				<br />
		<span class="small">2020-09-09 22:52</span><br />
				<br /><div class="small">
				</div>
	</td>
	<td class="bugnote-note-public">
		&gt; Dimple dye is behaving very oddly in conditions: having none in stock, the manager behaves if I have 223.<br />
<br />
Manager counted 223 items with Dimple Dye _material_ token, i.e. items dyed with dimple dye.<br />
<br />
Overall, currently manager could count only amount of _bags_ containing any dye:<br />
item type: items<br />
traits: dye.	</td>
</tr>
<tr class="spacer">
	<td colspan="2"></td>
</tr>
<tr class="bugnote" id="c40769">
        <td class="bugnote-public">
				<span class="small">(<a href="view.php?id=9972#c40769" title="Direct link to note">0040769)</a></span><br />
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11957">qeveren</a>		<span class="small">(reporter)</span>
				<br />
		<span class="small">2020-10-21 01:44</span><br />
				<br /><div class="small">
				</div>
	</td>
	<td class="bugnote-note-public">
		Confirming what Shirasik said: manager tracks only bags containing dye, and _only_ if those bags are _not_ inside another container (ie. a barrel) or a workshop.	</td>
</tr>
<tr class="spacer">
	<td colspan="2"></td>
</tr>
</table>

</div><div id="bugnotes_closed" class="hidden">
<table class="width100" cellspacing="1">
<tr>
	<td class="form-title" colspan="2">
		<a href="" onclick="ToggleDiv( 'bugnotes' ); return false;"
			><img border="0" src="images/plus.png" alt="+" /></a>&nbsp;		Notes	</td>
</tr>
</table>
</div>
<a name="history" id="history" /><br />

<div id="history_open"><table class="width100" cellspacing="0">
<tr>
	<td class="form-title" colspan="4">
<a href="" onclick="ToggleDiv( 'history' ); return false;"
			><img border="0" src="images/minus.png" alt="-" /></a>&nbsp;Issue History	</td>
</tr>
<tr class="row-category-history">
	<td class="small-caption">
		Date Modified	</td>
	<td class="small-caption">
		Username	</td>
	<td class="small-caption">
		Field	</td>
	<td class="small-caption">
		Change	</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2016-08-20 02:00	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11957">qeveren</a>	</td>
	<td class="small-caption">
		New Issue	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-2">
	<td class="small-caption">
		2016-08-20 05:34	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=36">Quietust</a>	</td>
	<td class="small-caption">
		Note Added: 0035796	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2016-08-20 14:54	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11957">qeveren</a>	</td>
	<td class="small-caption">
		Note Added: 0035798	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-2">
	<td class="small-caption">
		2016-08-21 17:25	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11957">qeveren</a>	</td>
	<td class="small-caption">
		Note Edited: 0035798	</td>
	<td class="small-caption">
		<a href="bug_revision_view_page.php?bugnote_id=0035798#r14430">View Revisions</a>	</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2016-08-21 17:25	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11957">qeveren</a>	</td>
	<td class="small-caption">
		Note Edited: 0035798	</td>
	<td class="small-caption">
		<a href="bug_revision_view_page.php?bugnote_id=0035798#r14431">View Revisions</a>	</td>
</tr>
<tr class="row-2">
	<td class="small-caption">
		2020-03-31 09:05	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11637">Sarmatian123</a>	</td>
	<td class="small-caption">
		Note Added: 0040431	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2020-03-31 09:05	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11637">Sarmatian123</a>	</td>
	<td class="small-caption">
		Issue Monitored: Sarmatian123	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-2">
	<td class="small-caption">
		2020-03-31 09:06	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11637">Sarmatian123</a>	</td>
	<td class="small-caption">
		Tag Attached: 0.47.04	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2020-09-09 22:52	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=14889">Shirasik</a>	</td>
	<td class="small-caption">
		Note Added: 0040723	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-2">
	<td class="small-caption">
		2020-10-21 01:44	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11957">qeveren</a>	</td>
	<td class="small-caption">
		Note Added: 0040769	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2022-05-27 20:52	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11957">qeveren</a>	</td>
	<td class="small-caption">
		Tag Attached: manager	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-2">
	<td class="small-caption">
		2022-05-27 20:52	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11957">qeveren</a>	</td>
	<td class="small-caption">
		Tag Attached: manager screen	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2022-05-27 20:53	</td>
	<td class="small-caption">
		<a href="http://bay12games.com/dwarves/mantisbt/view_user_page.php?id=11957">qeveren</a>	</td>
	<td class="small-caption">
		Tag Attached: Fortress Mode	</td>
	<td class="small-caption">
			</td>
</tr>
</table>
</div><div id="history_closed" class="hidden"><table class="width100" cellspacing="0">
<tr>
	<td class="form-title" colspan="4">
	<a href="" onclick="ToggleDiv( 'history' ); return false;"
			><img border="0" src="images/plus.png" alt="+" /></a>&nbsp;Issue History	</td>
</tr>
</table>

</div>	<br />
	<hr size="1" />
<table border="0" width="100%" cellspacing="0" cellpadding="0"><tr valign="top"><td>	<address>Copyright &copy; 2000 - 2010 MantisBT Group</address>
</td><td>
	<div align="right"><a href="http://www.mantisbt.org" title="Free Web Based Bug Tracker"><img src="/dwarves/mantisbt/images/mantis_logo_button.gif" width="88" height="35" alt="Powered by Mantis Bugtracker" border="0" /></a></div>
</td></tr></table>
</body>
</html>
